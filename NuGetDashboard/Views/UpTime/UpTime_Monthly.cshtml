@using NuGetDashboard.Models
@using System;
@using System.Collections.Generic;
@using System.Linq;
@using System.Web;
@model IEnumerable<PingdomMonthlyReportViewModel>

@using (Html.BeginForm("Monthly", "UpTime", FormMethod.Post, new { id = "ReportsForm" }))
{   

    <div>
        <select name="Reports" id="Reports">
            @* TBD :Populate the last 3 months dynamically.*@
            <option value="Select A month" id="Select a month">Select A Month</option>
            <option value="October" id="October">october</option>
            <option value="September" id="September">september</option>
            <option value="August" id="august">August</option>
        </select>
    </div> 
     
    <script type="text/javascript">
        $("#Reports").change(function (e) {
            document.getElementById('ReportsForm').submit();
        });
    </script>
}
<h3>Monthly Report for @ViewBag.SelectedValue</h3>
<table>
    <tbody>
        <tr>
            <th>Name
            </th>
            <th>UpTime
            </th>
            <th>DownTime
            </th>
            <th>Outages
            </th>
            <th>Avg Response time
            </th>

        </tr>
        @foreach (PingdomMonthlyReportViewModel pingdomcheck in @Model)
        {
            <tr>
                <td>
                    @pingdomcheck.Name
                </td>
                <td>
                    @pingdomcheck.totalUpTime
                </td>
                <td>
                    @pingdomcheck.DownTime
                </td>
                <td>
                    @pingdomcheck.Outages
                </td>
                <td>
                    @pingdomcheck.AvgResponseTime
                </td>
            </tr>
        }
    </tbody>
</table>
